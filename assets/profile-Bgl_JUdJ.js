import{p as xe,v as j,y as w,f as ie,B as Pe,a0 as me,a1 as Te,n as Me,a2 as Ke,r as p,M as ge,J as O,Y as ee,a3 as Oe,C as _e,a as u,m as U,O as Ne,a4 as Ue,a5 as ke,F as Q,a6 as pe,a7 as Le,g as Ae,K as ze,L as He,a8 as je,H as Ge,I as $e,P as we,a9 as Je,aa as Qe,ab as We,u as Ye,ac as Xe,e as Ze,w as Z,o as qe,k as et,l as tt}from"./index-DJdkw0ut.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as at}from"./VContainer-pDmDgT3X.js";import{V as nt,b as ut,c as ot}from"./VCard-BtyOIBgG.js";import{u as it,V as he,m as rt,a as st,b as Ce,f as ct,c as dt,d as ft,e as vt,g as mt}from"./VTextField-C8DfAiqC.js";import{f as Re,V as gt}from"./forwardRefs-BM8Zj_qL.js";import{o as ht,k as xt,V as Fe,j as yt,n as Vt,I as bt}from"./index-BWEpS7gr.js";import{u as kt,m as wt,V as Ct,a as Ft}from"./VSelect-D1bEeDl-.js";import{u as St,t as q,V as It}from"./VList-sW_fdHX4.js";import{V as Pt}from"./VMenu-CPt1Cmh2.js";import{V as Se}from"./scopeId-Ctw-bI25.js";import{V as Mt}from"./VChip-BbIgo3F4.js";import{V as _t}from"./VSpacer-LPDhxTro.js";/* empty css              */const At=(e,m,l)=>e==null||m==null?-1:e.toString().toLocaleLowerCase().indexOf(m.toString().toLocaleLowerCase()),Rt=xe({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Dt(e,m,l){var g;const a=[],h=(l==null?void 0:l.default)??At,o=l!=null&&l.filterKeys?me(l.filterKeys):!1,d=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let b=0;b<e.length;b++){const[F,T=F]=me(e[b]),B={},f={};let i=-1;if((m||d>0)&&!(l!=null&&l.noFilter)){if(typeof F=="object"){const L=o||Object.keys(T);for(const S of L){const W=Te(T,S),G=(g=l==null?void 0:l.customKeyFilter)==null?void 0:g[S];if(i=G?G(W,m,F):h(W,m,F),i!==-1&&i!==!1)G?B[S]=i:f[S]=i;else if((l==null?void 0:l.filterMode)==="every")continue e}}else i=h(F,m,F),i!==-1&&i!==!1&&(f.title=i);const _=Object.keys(f).length,A=Object.keys(B).length;if(!_&&!A||(l==null?void 0:l.filterMode)==="union"&&A!==d&&!_||(l==null?void 0:l.filterMode)==="intersection"&&(A!==d||!_))continue}a.push({index:b,matches:{...f,...B}})}return a}function Bt(e,m,l,a){const h=j([]),o=j(new Map),d=w(()=>ie(m));Pe(()=>{const b=typeof l=="function"?l():ie(l),F=typeof b!="string"&&typeof b!="number"?"":String(b),T=Dt(d.value,F,{customKeyFilter:{...e.customKeyFilter,...ie(a==null?void 0:a.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),B=ie(m),f=[],i=new Map;T.forEach(_=>{let{index:A,matches:L}=_;const S=B[A];f.push(S),i.set(S.value,L)}),h.value=f,o.value=i});function g(b){return o.value.get(b.value)}return{filteredItems:h,filteredMatches:o,getMatches:g}}function Et(e,m,l){if(m==null)return e;if(Array.isArray(m))throw new Error("Multiple matches is not implemented");return typeof m=="number"&&~m?u(Q,null,[u("span",{class:"v-combobox__unmask"},[e.substr(0,m)]),u("span",{class:"v-combobox__mask"},[e.substr(m,l)]),u("span",{class:"v-combobox__unmask"},[e.substr(m+l)])]):e}const Tt=xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Rt({filterKeys:["title"]}),...wt({hideNoData:!0,returnObject:!0}),...Ne(rt({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...xt({transition:!1})},"VCombobox"),Ie=Me()({name:"VCombobox",props:Tt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,m){var ye;let{emit:l,slots:a}=m;const{t:h}=Ke(),o=p(),d=j(!1),g=j(!0),b=j(!1),F=p(),T=p(),B=ge(e,"menu"),f=w({get:()=>B.value,set:t=>{var r;B.value&&!t&&((r=F.value)!=null&&r.ΨopenChildren.size)||(B.value=t)}}),i=j(-1);let _=!1;const A=w(()=>{var t;return(t=o.value)==null?void 0:t.color}),L=w(()=>f.value?e.closeText:e.openText),{items:S,transformIn:W,transformOut:G}=St(e),{textColorClasses:re,textColorStyles:se}=ht(A),s=ge(e,"modelValue",[],t=>W(me(t)),t=>{const r=G(t);return e.multiple?r:r[0]??null}),N=it(e),z=w(()=>!!(e.chips||a.chip)),k=w(()=>z.value||!!a.selection),V=j(!e.multiple&&!k.value?((ye=s.value[0])==null?void 0:ye.title)??"":""),n=w({get:()=>V.value,set:t=>{var r;if(V.value=t??"",!e.multiple&&!k.value&&(s.value=[q(e,t)]),t&&e.multiple&&((r=e.delimiters)!=null&&r.length)){const x=t.split(new RegExp(`(?:${e.delimiters.join("|")})+`));x.length>1&&(x.forEach(c=>{c=c.trim(),c&&K(q(e,c))}),V.value="")}t||(i.value=-1),g.value=!t}}),I=w(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?s.value.length:n.value.length);O(V,t=>{_?ee(()=>_=!1):d.value&&!f.value&&(f.value=!0),l("update:search",t)}),O(s,t=>{var r;!e.multiple&&!k.value&&(V.value=((r=t[0])==null?void 0:r.title)??"")});const{filteredItems:y,getMatches:E}=Bt(e,S,()=>g.value?"":n.value),P=w(()=>e.hideSelected?y.value.filter(t=>!s.value.some(r=>r.value===t.value)):y.value),X=w(()=>s.value.map(t=>t.value)),$=w(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&n.value===((r=P.value[0])==null?void 0:r.title))&&P.value.length>0&&!g.value&&!b.value}),R=w(()=>e.hideNoData&&!P.value.length||N.isReadonly.value||N.isDisabled.value),H=p(),te=kt(H,o);function le(t){_=!0,e.openOnClear&&(f.value=!0)}function ce(){R.value||(f.value=!0)}function de(t){R.value||(d.value&&(t.preventDefault(),t.stopPropagation()),f.value=!f.value)}function fe(t){var r;t.key!==" "&&ke(t)&&((r=o.value)==null||r.focus())}function ae(t){var c;if(Ue(t)||N.isReadonly.value)return;const r=o.value.selectionStart,x=s.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(f.value=!0),["Escape"].includes(t.key)&&(f.value=!1),["Enter","Escape","Tab"].includes(t.key)&&($.value&&["Enter","Tab"].includes(t.key)&&!s.value.some(v=>{let{value:D}=v;return D===P.value[0].value})&&K(y.value[0]),g.value=!0),t.key==="ArrowDown"&&$.value&&((c=H.value)==null||c.focus("next")),t.key==="Enter"&&n.value&&(K(q(e,n.value)),k.value&&(V.value="")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&k.value&&s.value.length>0&&!n.value)return K(s.value[0],!1);if(~i.value){t.preventDefault();const v=i.value;K(s.value[i.value],!1),i.value=v>=x-1?x-2:v}else t.key==="Backspace"&&!n.value&&(i.value=x-1);return}if(e.multiple)if(t.key==="ArrowLeft"){if(i.value<0&&r>0)return;const v=i.value>-1?i.value-1:x-1;s.value[v]?i.value=v:(i.value=-1,o.value.setSelectionRange(n.value.length,n.value.length))}else if(t.key==="ArrowRight"){if(i.value<0)return;const v=i.value+1;s.value[v]?i.value=v:(i.value=-1,o.value.setSelectionRange(0,0))}else~i.value&&ke(t)&&(i.value=-1)}function ne(){var t;e.eager&&((t=T.value)==null||t.calculateVisibleItems())}function ve(){var t;d.value&&(g.value=!0,(t=o.value)==null||t.focus())}function K(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!t||t.props.disabled))if(e.multiple){const x=s.value.findIndex(v=>e.valueComparator(v.value,t.value)),c=r??!~x;if(~x){const v=c?[...s.value,t]:[...s.value];v.splice(x,1),s.value=v}else c&&(s.value=[...s.value,t]);e.clearOnSelect&&(n.value="")}else{const x=r!==!1;s.value=x?[t]:[],V.value=x&&!k.value?t.title:"",ee(()=>{f.value=!1,g.value=!0})}}function De(t){d.value=!0,setTimeout(()=>{b.value=!0})}function Be(t){b.value=!1}function Ee(t){(t==null||t===""&&!e.multiple&&!k.value)&&(s.value=[])}return O(d,(t,r)=>{if(!(t||t===r)&&(i.value=-1,f.value=!1,n.value)){if(e.multiple){K(q(e,n.value));return}if(!k.value)return;s.value.some(x=>{let{title:c}=x;return c===n.value})?V.value="":K(q(e,n.value))}}),O(f,()=>{if(!e.hideSelected&&f.value&&s.value.length){const t=P.value.findIndex(r=>s.value.some(x=>e.valueComparator(x.value,r.value)));Oe&&window.requestAnimationFrame(()=>{var r;t>=0&&((r=T.value)==null||r.scrollToIndex(t))})}}),O(()=>e.items,(t,r)=>{f.value||d.value&&!r.length&&t.length&&(f.value=!0)}),_e(()=>{const t=!!(!e.hideNoData||P.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),r=s.value.length>0,x=he.filterProps(e);return u(he,U({ref:o},x,{modelValue:n.value,"onUpdate:modelValue":[c=>n.value=c,Ee],focused:d.value,"onUpdate:focused":c=>d.value=c,validationValue:s.externalValue,counterValue:I.value,dirty:r,class:["v-combobox",{"v-combobox--active-menu":f.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!k.value,"v-combobox--selecting-index":i.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:N.isReadonly.value,placeholder:r?void 0:e.placeholder,"onClick:clear":le,"onMousedown:control":ce,onKeydown:ae}),{...a,default:()=>u(Q,null,[u(Pt,U({ref:F,modelValue:f.value,"onUpdate:modelValue":c=>f.value=c,activator:"parent",contentClass:"v-combobox__content",disabled:R.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ne,onAfterLeave:ve},e.menuProps),{default:()=>[t&&u(It,U({ref:H,selected:X.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:c=>c.preventDefault(),onKeydown:fe,onFocusin:De,onFocusout:Be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},te,e.listProps),{default:()=>{var c,v,D;return[(c=a["prepend-item"])==null?void 0:c.call(a),!P.value.length&&!e.hideNoData&&(((v=a["no-data"])==null?void 0:v.call(a))??u(Se,{key:"no-data",title:h(e.noDataText)},null)),u(Ct,{ref:T,renderless:!0,items:P.value},{default:J=>{var be;let{item:C,index:Y,itemRef:M}=J;const Ve=U(C.props,{ref:M,key:C.value,active:$.value&&Y===0?!0:void 0,onClick:()=>K(C,null)});return((be=a.item)==null?void 0:be.call(a,{item:C,index:Y,props:Ve}))??u(Se,U(Ve,{role:"option"}),{prepend:ue=>{let{isSelected:oe}=ue;return u(Q,null,[e.multiple&&!e.hideSelected?u(Ft,{key:C.value,modelValue:oe,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&u(yt,{image:C.props.prependAvatar},null),C.props.prependIcon&&u(Fe,{icon:C.props.prependIcon},null)])},title:()=>{var ue,oe;return g.value?C.title:Et(C.title,(ue=E(C))==null?void 0:ue.title,((oe=n.value)==null?void 0:oe.length)??0)}})}}),(D=a["append-item"])==null?void 0:D.call(a)]}})]}),s.value.map((c,v)=>{function D(M){M.stopPropagation(),M.preventDefault(),K(c,!1)}const J={"onClick:close":D,onKeydown(M){M.key!=="Enter"&&M.key!==" "||(M.preventDefault(),M.stopPropagation(),D(M))},onMousedown(M){M.preventDefault(),M.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=z.value?!!a.chip:!!a.selection,Y=C?Le(z.value?a.chip({item:c,index:v,props:J}):a.selection({item:c,index:v})):void 0;if(!(C&&!Y))return u("div",{key:c.value,class:["v-combobox__selection",v===i.value&&["v-combobox__selection--selected",re.value]],style:v===i.value?se.value:{}},[z.value?a.chip?u(Vt,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:c.title}}},{default:()=>[Y]}):u(Mt,U({key:"chip",closable:e.closableChips,size:"small",text:c.title,disabled:c.props.disabled},J),null):Y??u("span",{class:"v-combobox__selection-text"},[c.title,e.multiple&&v<s.value.length-1&&u("span",{class:"v-combobox__selection-comma"},[Ae(",")])])])})]),"append-inner":function(){var J;for(var c=arguments.length,v=new Array(c),D=0;D<c;D++)v[D]=arguments[D];return u(Q,null,[(J=a["append-inner"])==null?void 0:J.call(a,...v),(!e.hideNoData||e.items.length)&&e.menuIcon?u(Fe,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:de,onClick:pe,"aria-label":h(L.value),title:h(L.value),tabindex:"-1"},null):void 0])}})}),Re({isFocused:d,isPristine:g,menu:f,search:n,selectionIndex:i,filteredItems:y,select:K},o)}}),Kt=xe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ft(),...dt()},"VTextarea"),Ot=Me()({name:"VTextarea",directives:{Intersect:bt},inheritAttrs:!1,props:Kt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:l,emit:a,slots:h}=m;const o=ge(e,"modelValue"),{isFocused:d,focus:g,blur:b}=st(e),F=w(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),T=w(()=>{if(l.maxlength)return l.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function B(n,I){var y,E;!e.autofocus||!n||(E=(y=I[0].target)==null?void 0:y.focus)==null||E.call(y)}const f=p(),i=p(),_=j(""),A=p(),L=w(()=>e.persistentPlaceholder||d.value||e.active);function S(){var n;A.value!==document.activeElement&&((n=A.value)==null||n.focus()),d.value||g()}function W(n){S(),a("click:control",n)}function G(n){a("mousedown:control",n)}function re(n){n.stopPropagation(),S(),ee(()=>{o.value="",We(e["onClick:clear"],n)})}function se(n){var y;const I=n.target;if(o.value=I.value,(y=e.modelModifiers)!=null&&y.trim){const E=[I.selectionStart,I.selectionEnd];ee(()=>{I.selectionStart=E[0],I.selectionEnd=E[1]})}}const s=p(),N=p(+e.rows),z=w(()=>["plain","underlined"].includes(e.variant));Pe(()=>{e.autoGrow||(N.value=+e.rows)});function k(){e.autoGrow&&ee(()=>{if(!s.value||!i.value)return;const n=getComputedStyle(s.value),I=getComputedStyle(i.value.$el),y=parseFloat(n.getPropertyValue("--v-field-padding-top"))+parseFloat(n.getPropertyValue("--v-input-padding-top"))+parseFloat(n.getPropertyValue("--v-field-padding-bottom")),E=s.value.scrollHeight,P=parseFloat(n.lineHeight),X=Math.max(parseFloat(e.rows)*P+y,parseFloat(I.getPropertyValue("--v-input-control-height"))),$=parseFloat(e.maxRows)*P+y||1/0,R=$e(E??0,X,$);N.value=Math.floor((R-y)/P),_.value=Ge(R)})}ze(k),O(o,k),O(()=>e.rows,k),O(()=>e.maxRows,k),O(()=>e.density,k);let V;return O(s,n=>{n?(V=new ResizeObserver(k),V.observe(s.value)):V==null||V.disconnect()}),He(()=>{V==null||V.disconnect()}),_e(()=>{const n=!!(h.counter||e.counter||e.counterValue),I=!!(n||h.details),[y,E]=je(l),{modelValue:P,...X}=Ce.filterProps(e),$=ct(e);return u(Ce,U({ref:f,modelValue:o.value,"onUpdate:modelValue":R=>o.value=R,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":z.value},e.class],style:e.style},y,X,{centerAffix:N.value===1&&!z.value,focused:d.value}),{...h,default:R=>{let{id:H,isDisabled:te,isDirty:le,isReadonly:ce,isValid:de}=R;return u(mt,U({ref:i,style:{"--v-textarea-control-height":_.value},onClick:W,onMousedown:G,"onClick:clear":re,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},$,{id:H.value,active:L.value||le.value,centerAffix:N.value===1&&!z.value,dirty:le.value||e.dirty,disabled:te.value,focused:d.value,error:de.value===!1}),{...h,default:fe=>{let{props:{class:ae,...ne}}=fe;return u(Q,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),we(u("textarea",U({ref:A,class:ae,value:o.value,onInput:se,autofocus:e.autofocus,readonly:ce.value,disabled:te.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:S,onBlur:b},ne,E),null),[[Je("intersect"),{handler:B},null,{once:!0}]]),e.autoGrow&&we(u("textarea",{class:[ae,"v-textarea__sizer"],id:`${ne.id}-sizer`,"onUpdate:modelValue":ve=>o.value=ve,ref:s,readonly:!0,"aria-hidden":"true"},null),[[Qe,o.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:I?R=>{var H;return u(Q,null,[(H=h.details)==null?void 0:H.call(h,R),n&&u(Q,null,[u("span",null,null),u(vt,{active:e.persistentCounter||d.value,value:F.value,max:T.value,disabled:e.disabled},h.counter)])])}:void 0})}),Re({},f,i,A)}}),Nt={__name:"profile",setup(e){const{apiAuth:m}=tt(),l=Ye(),a=Xe({nickname:l.nickname,introduction:l.introduction,learningSkills:[...l.learningSkills.map(o=>o.name)],teachingSkills:[...l.teachingSkills.map(o=>o.name)]});async function h(){try{console.log(a);const o=await m.put("/user/profile",a,{headers:{Authorization:`Bearer ${l.token}`}});o.data.success?(l.nickname=o.data.result.nickname,l.introduction=o.data.result.introduction,l.learningSkills=o.data.result.learningSkills,l.teachingSkills=o.data.result.teachingSkills,alert("更新成功！")):alert("更新失敗："+o.data.message)}catch(o){console.error("更新個人資料錯誤：",o),alert("更新時發生錯誤")}}return(o,d)=>(qe(),Ze(at,{class:"py-4"},{default:Z(()=>[d[5]||(d[5]=et("h1",null,"編輯個人資料",-1)),u(nt,null,{default:Z(()=>[u(ut,null,{default:Z(()=>[u(he,{modelValue:a.nickname,"onUpdate:modelValue":d[0]||(d[0]=g=>a.nickname=g),label:"暱稱",outlined:""},null,8,["modelValue"]),u(Ot,{modelValue:a.introduction,"onUpdate:modelValue":d[1]||(d[1]=g=>a.introduction=g),label:"自我介紹",outlined:""},null,8,["modelValue"]),u(Ie,{modelValue:a.learningSkills,"onUpdate:modelValue":d[2]||(d[2]=g=>a.learningSkills=g),label:"想學的東西",multiple:"",chips:"",clearable:"",outlined:""},null,8,["modelValue"]),u(Ie,{modelValue:a.teachingSkills,"onUpdate:modelValue":d[3]||(d[3]=g=>a.teachingSkills=g),label:"想教的東西",multiple:"",chips:"",clearable:"",outlined:""},null,8,["modelValue"])]),_:1}),u(ot,null,{default:Z(()=>[u(_t),u(gt,{color:"primary",onClick:h},{default:Z(()=>d[4]||(d[4]=[Ae(" 上傳 ")])),_:1})]),_:1})]),_:1})]),_:1}))}},qt=lt(Nt,[["__scopeId","data-v-7407d895"]]);export{qt as default};
