import{u as y,l as C,h as M,e as U,w as o,o as B,a as r,k as V,j as F,f as a,g as q}from"./index-C0DIyI7L.js";import{c as A,a as t,d as N,v as $,u as O,b as n}from"./index-D08FkpeY.js";import{V as R}from"./VContainer-BA_xmbrw.js";import{V as T,a as c}from"./VRow-s6DSkRK0.js";import{a as _}from"./scopeId-D2EdRVTT.js";import{V as j}from"./VForm-DPPg1cwx.js";import{V as u}from"./VTextField-D7X2KwLO.js";import{b as D}from"./VSelect-DpXnGDuT.js";import{V as z}from"./forwardRefs-DCfk-5Oq.js";/* empty css              */import"./index-Jd9EG2Z1.js";import"./VList-BDLiIMdw.js";import"./VMenu-C2lKjAH2.js";import"./VChip-DtkuFZ2y.js";const E={class:"text-center"},se={__name:"register",setup(G){const{api:f}=C(),b=M(),w=y(),x=A({username:t().required("帳號必填").min(4,"帳號過短").max(20,"帳號過長").test("isAlphanumeric","請輸入英數字",l=>$.isAlphanumeric(l)),password:t().required("密碼必填").min(4,"密碼過短").max(20,"密碼過長"),passwordConfirm:t().oneOf([N("password")],"密碼不一致"),nickname:t().max(10,"暱稱過長"),gender:t().required("性別必填")}),{handleSubmit:k,isSubmitting:v}=O({validationSchema:x}),m=n("username"),i=n("password"),d=n("passwordConfirm"),p=n("gender"),g=n("nickname"),S=k(async l=>{try{const{data:e}=await f.post("/user",{username:l.username,password:l.password,nickname:l.nickname,gender:l.gender});w.login(e.result),console.log("註冊成功:",e.result),b.push("/login")}catch(e){console.log(e)}}),h=[{label:"男",value:"male"},{label:"女",value:"female"},{label:"我是一隻蜜蜂",value:!1}];return(l,e)=>(B(),U(R,null,{default:o(()=>[r(T,null,{default:o(()=>[r(c,{cols:"12"},{default:o(()=>e[5]||(e[5]=[V("h1",{class:"text-center"},"註冊",-1)])),_:1}),r(_),r(c,{cols:"12"},{default:o(()=>[r(j,{disabled:a(v),onSubmit:F(a(S),["prevent"])},{default:o(()=>[r(u,{modelValue:a(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a(m).value.value=s),"error-messages":a(m).errorMessage.value,label:"帳號",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),r(u,{modelValue:a(i).value.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a(i).value.value=s),type:"password","error-messages":a(i).errorMessage.value,label:"密碼",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),r(u,{modelValue:a(d).value.value,"onUpdate:modelValue":e[2]||(e[2]=s=>a(d).value.value=s),type:"password","error-messages":a(d).errorMessage.value,label:"密碼確認",minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages"]),r(D,{modelValue:a(p).value.value,"onUpdate:modelValue":e[3]||(e[3]=s=>a(p).value.value=s),items:h,"item-title":"label","item-value":"value","error-messages":a(p).errorMessage.value,label:"性別",variant:"outlined"},null,8,["modelValue","error-messages"]),r(u,{modelValue:a(g).value.value,"onUpdate:modelValue":e[4]||(e[4]=s=>a(g).value.value=s),"error-messages":a(g).errorMessage.value,label:"暱稱",maxlength:"10"},null,8,["modelValue","error-messages"]),V("div",E,[r(z,{loading:a(v),type:"submit",color:"primary"},{default:o(()=>e[6]||(e[6]=[q("送出")])),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{se as default};
