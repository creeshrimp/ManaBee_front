import{m as L,V as T}from"./VToolbar-Cn_-lIHa.js";import{p as B,r as w,s as p,v as o,I as R,J as b,K as M,L as z,k as P,M as C,x as U,z as F,y as q,n as A,A as N,C as J,a as k,m as x}from"./index-Bspives2.js";import{u as K}from"./scopeId-CV1RahNc.js";import{V as O,m as W}from"./forwardRefs-BoHyr2Kr.js";const Y=B({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function $(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=f;let d=0,s=0;const l=w(null),n=p(0),r=p(0),m=p(0),S=p(!1),c=p(!1),v=o(()=>Number(e.scrollThreshold)),V=o(()=>R((v.value-n.value)/v.value||0)),h=()=>{const t=l.value;if(!t||u&&!u.value)return;d=n.value,n.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(s!==i){s=i;return}c.value=n.value<d,m.value=Math.abs(n.value-v.value)};return b(c,()=>{r.value=r.value||n.value}),b(S,()=>{r.value=0}),M(()=>{b(()=>e.scrollTarget,t=>{var y;const i=t?document.querySelector(t):window;i&&i!==l.value&&((y=l.value)==null||y.removeEventListener("scroll",h),l.value=i,l.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),z(()=>{var t;(t=l.value)==null||t.removeEventListener("scroll",h)}),u&&b(u,h,{immediate:!0}),{scrollThreshold:v,currentScroll:n,currentThreshold:m,isScrollActive:S,scrollRatio:V,isScrollingUp:c,savedScroll:r}}const j=B({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...L(),...J(),...Y(),height:{type:[Number,String],default:64}},"VAppBar"),_=P()({name:"VAppBar",props:j(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:u}=f;const d=w(),s=C(e,"modelValue"),l=o(()=>{var g;const a=new Set(((g=e.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),n=o(()=>{const a=l.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:r,scrollThreshold:m,isScrollingUp:S,scrollRatio:c}=$(e,{canScroll:n}),v=o(()=>l.value.hide||l.value.fullyHide),V=o(()=>e.collapse||l.value.collapse&&(l.value.inverted?c.value>0:c.value===0)),h=o(()=>e.flat||l.value.fullyHide&&!s.value||l.value.elevate&&(l.value.inverted?r.value>0:r.value===0)),t=o(()=>l.value.fadeImage?l.value.inverted?1-c.value:c.value:void 0),i=o(()=>{var H,I;if(l.value.hide&&l.value.inverted)return 0;const a=((H=d.value)==null?void 0:H.contentHeight)??0,g=((I=d.value)==null?void 0:I.extensionHeight)??0;return v.value?r.value<m.value||l.value.fullyHide?a+g:a:a+g});U(o(()=>!!e.scrollBehavior),()=>{F(()=>{v.value?l.value.inverted?s.value=r.value>m.value:s.value=S.value||r.value<m.value:s.value=!0})});const{ssrBootStyles:y}=K(),{layoutItemStyles:E}=q({id:e.name,order:o(()=>parseInt(e.order,10)),position:A(e,"location"),layoutSize:i,elementSize:p(void 0),active:s,absolute:A(e,"absolute")});return N(()=>{const a=T.filterProps(e);return k(T,x({ref:d,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...E.value,"--v-toolbar-image-opacity":t.value,height:void 0,...y.value},e.style]},a,{collapse:V.value,flat:h.value}),u)}),{}}}),D=B({...W({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ee=P()({name:"VAppBarNavIcon",props:D(),setup(e,f){let{slots:u}=f;return N(()=>k(O,x(e,{class:["v-app-bar-nav-icon"]}),u)),{}}});export{_ as V,ee as a};
